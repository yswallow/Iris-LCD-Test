/* USER CODE BEGIN Header */
/**
  ******************************************************************************
  * @file           : main.c
  * @brief          : Main program body
  ******************************************************************************
  * @attention
  *
  * <h2><center>&copy; Copyright (c) 2021 STMicroelectronics.
  * All rights reserved.</center></h2>
  *
  * This software component is licensed by ST under BSD 3-Clause license,
  * the "License"; You may not use this file except in compliance with the
  * License. You may obtain a copy of the License at:
  *                        opensource.org/licenses/BSD-3-Clause
  *
  ******************************************************************************
  */
/* USER CODE END Header */
/* Includes ------------------------------------------------------------------*/
#include "main.h"

/* Private includes ----------------------------------------------------------*/
/* USER CODE BEGIN Includes */
#include <stdint.h>
#include <stdlib.h>
#include "Iris_if.h"
#include "Iris_img.h"
#include "Iris_if_sub.h"

/* USER CODE END Includes */

/* Private typedef -----------------------------------------------------------*/
/* USER CODE BEGIN PTD */

/* USER CODE END PTD */

/* Private define ------------------------------------------------------------*/
/* USER CODE BEGIN PD */
/* USER CODE END PD */

/* Private macro -------------------------------------------------------------*/
/* USER CODE BEGIN PM */

/* USER CODE END PM */

/* Private variables ---------------------------------------------------------*/
PCD_HandleTypeDef hpcd_USB_OTG_FS;

/* USER CODE BEGIN PV */
uint16_t sushi[2304] = {
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x1860, 0x69C5, 0x7A46, 0x82C8, 0x7B2B, 0x838C, 0x7BAE, 0x83AE, 0x7B2C, 0x5A07, 0x0821, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x5143, 0xAB88,
    0xFD2E, 0xFDD0, 0xFDF0, 0xFDF1, 0xFE32, 0xFEB5, 0xFF16, 0xFEF7, 0xFEF6, 0xFEF6, 0xFED5, 0xFED5, 0xFF17, 0xFED6, 0xE551, 0x934A,
    0x5165, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x7A65, 0xFDB0, 0xFE52, 0xFDD2,
    0xFD92, 0xFD71, 0xFD30, 0xF590, 0xFDB1, 0xFD4E, 0xF52D, 0xFD6D, 0xFD8E, 0xF5AE, 0xFDCF, 0xF5F0, 0xF5F0, 0xF5D1, 0xFDF1, 0xFDF1,
    0xFE12, 0xFE32, 0xCC2C, 0x5143, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0xFD6F, 0xFE74, 0xFD91, 0xFC8D, 0xFC2B,
    0xFC4A, 0xF429, 0xFD0C, 0xF4CA, 0xFC88, 0xF4A9, 0xFCC9, 0xF4E9, 0xFD08, 0xFD09, 0xF509, 0xFD09, 0xF509, 0xFD2B, 0xF5AE, 0xF5AE,
    0xF5B0, 0xF5D1, 0xFDF2, 0xFE12, 0xFCEE, 0x5143, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x1840, 0xFEB3, 0xFE54, 0xFC8D, 0xFC4A, 0xFC89, 0xFC88,
    0xFC86, 0xFDAD, 0xF528, 0xFD07, 0xFD27, 0xFD27, 0xFD47, 0xFD27, 0xF507, 0xFD07, 0xFCC6, 0xF54B, 0xFDAC, 0xF52A, 0xF4A7, 0xFCA8,
    0xF4A8, 0xF4AA, 0xF50C, 0xF54E, 0xFDB1, 0xFDB0, 0xE40A, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0xFE72, 0xFDF3, 0xFCA9, 0xFD08, 0xFD48, 0xFD66, 0xFE2B,
    0xF60C, 0xFD46, 0xFD05, 0xFCE5, 0xFD05, 0xFCE5, 0xF4C5, 0xFD87, 0xFE4B, 0xF6B0, 0xFEAF, 0xFDC8, 0xFD26, 0xFCE7, 0xFCC7, 0xF4A8,
    0xFC87, 0xF487, 0xFC68, 0xF489, 0xF4CB, 0xF56F, 0xFD70, 0xFD8E, 0x28C2, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x9B48, 0xFEB4, 0xFD68, 0xFDA8, 0xFD86, 0xFCA5, 0xFD09, 0xFB43,
    0xFAE3, 0xFAA3, 0xFA62, 0xFA42, 0xFA62, 0xFB24, 0xFB86, 0xFAE3, 0xFAC1, 0xFAA0, 0xFB61, 0xFC85, 0xF5A8, 0xFE09, 0xFD87, 0xFD07,
    0xF4C6, 0xFC87, 0xF467, 0xFC67, 0xFC48, 0xFC6A, 0xF4EC, 0xFD4F, 0xFDAF, 0x69A3, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0xFF17, 0xFD46, 0xFCC5, 0xFB84, 0xFAC3, 0xFBC7, 0xF9C1, 0xF9A1,
    0xF960, 0xF100, 0xE8E0, 0xF9E2, 0xE9A2, 0xF100, 0xF120, 0xE961, 0xF1A1, 0xFA02, 0xFA01, 0xFA01, 0xFA60, 0xFB41, 0xFCE5, 0xFE0B,
    0xFDEB, 0xFD69, 0xFD29, 0xF50A, 0xF50B, 0xFD0C, 0xF56E, 0xFD2F, 0xF54F, 0xFDCF, 0x30C2, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x1841, 0xFD09, 0xFB23, 0xFA42, 0xF940, 0xFA42, 0xD101, 0xBA05, 0xAAE9,
    0xABED, 0x93ED, 0x9C6F, 0x9CD1, 0xAD53, 0x9CF2, 0xACB1, 0xA40E, 0xB36D, 0xB288, 0xC902, 0xD8A0, 0xF161, 0xF263, 0xFB06, 0xFB22,
    0xFCE4, 0xF608, 0xFD88, 0xFD06, 0xFCC8, 0xFCA9, 0xFC89, 0xF48B, 0xFCED, 0xFD6F, 0xFDAF, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0xDA85, 0xE9C3, 0xC3AC, 0xB533, 0xBE57, 0xDFBD, 0xE77D, 0xC677,
    0xDEFA, 0xD698, 0xE71B, 0xE6F9, 0xF77D, 0xE73B, 0xEF3B, 0xEF7D, 0xE71A, 0xD71A, 0xDF3B, 0xB594, 0xCCAF, 0xC102, 0xE060, 0xE940,
    0xF9E2, 0xFB42, 0xFD86, 0xFE2A, 0xFD68, 0xFD29, 0xFD0A, 0xFCCB, 0xFCCC, 0xFD0E, 0xFE52, 0x3103, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x3A8A, 0xD79B, 0xBE36, 0xEF9D, 0xE71A, 0xEF3C, 0xE71A, 0xEF3C,
    0xE71A, 0xD6B9, 0xD678, 0xE73B, 0xDED9, 0xE71B, 0xE71A, 0xE6FA, 0xDEDA, 0xE71B, 0xE6FA, 0xE71B, 0xE73B, 0xCED9, 0xB553, 0xBA87,
    0xE0A0, 0xF181, 0xF9C1, 0xFBE3, 0xFEAC, 0xFE4E, 0xFDEC, 0xFDAD, 0xFD6D, 0xFD4E, 0xFED4, 0x2924, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0xAD54, 0xD6D8, 0xCE36, 0xE73B, 0xBE36, 0xD6D9, 0xD71A,
    0xCED9, 0xDF3B, 0xD6D9, 0xDED9, 0xCE97, 0xD6D9, 0xD6D9, 0xD6B8, 0xDF3A, 0xDEFA, 0xDED9, 0xE6FA, 0xE6FA, 0xEF3B, 0xEF5B, 0xDF1B,
    0x9511, 0xB1C5, 0xF1C2, 0xF223, 0xFA61, 0xFCE4, 0xFDE7, 0xFD8A, 0xFD6B, 0xFDAE, 0xFE90, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x4227, 0x9D53, 0xADB4, 0xE699, 0xF679, 0xFDD6,
    0xFD96, 0xFD55, 0xFD34, 0xFD34, 0xFD14, 0xFD14, 0xF514, 0xFDB6, 0xF618, 0xF658, 0xE698, 0xDEB9, 0xCEF9, 0xD6DA, 0xDEFA, 0xDEB9,
    0xEF3B, 0xC698, 0x9C4E, 0xC880, 0xF141, 0xF161, 0xFB23, 0xFD65, 0xFDA8, 0xFD27, 0xAB08, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x41C7, 0xD514, 0xFDF7, 0xFD14, 0xFCB2, 0xF472,
    0xF430, 0xF3CF, 0xF38E, 0xF30C, 0xEB6E, 0xF411, 0xEBAE, 0xF34E, 0xEB4D, 0xEB8E, 0xF410, 0xF4B3, 0xFD75, 0xFE38, 0xE6B9, 0xD6F9,
    0xD6B9, 0xCE57, 0xF79D, 0xBE77, 0x9A47, 0xC8A0, 0xE8A0, 0xF120, 0xEA60, 0xD369, 0x0001, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0xF5D7, 0xFE38, 0xFD34, 0xF451, 0xF451, 0xEC31, 0xEC11,
    0xF3CF, 0xEC11, 0xF4B3, 0xF493, 0xF3CF, 0xF2AB, 0xF2CC, 0xEACC, 0xF2AB, 0xF2AC, 0xEA8B, 0xEB2D, 0xF430, 0xEC72, 0xFD55, 0xFDF7,
    0xEE57, 0xD697, 0xCED9, 0xE71B, 0xDF3A, 0xCEFA, 0xB552, 0xC5D5, 0xCEFB, 0xA5B5, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x2945, 0xFE9A, 0xFCD3, 0xF471, 0xF3D0, 0xEBAF, 0xEBF0, 0xEC51, 0xEC52,
    0xF431, 0xEB6E, 0xEA6A, 0xEAAB, 0xEAAC, 0xEACC, 0xF2CB, 0xEACC, 0xF2AB, 0xF3AF, 0xF411, 0xF3AF, 0xEAAB, 0xF2EC, 0xEB2D, 0xF3CF,
    0xF4D3, 0xFD96, 0xEDF6, 0xD697, 0xCEB8, 0xDEB9, 0xE73B, 0xD698, 0xFFFD, 0x62C9, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x2945, 0xFD55, 0xFC71, 0xF3CF, 0xEAEC, 0xF410, 0xF411, 0xF36E, 0xEB2D, 0xF32D,
    0xEACC, 0xF2EC, 0xF34E, 0xF36E, 0xEB0D, 0xF30C, 0xF32E, 0xEB2D, 0xF3AF, 0xEA8B, 0xEA8A, 0xF2AC, 0xEB0C, 0xF30D, 0xEB2D, 0xF34D,
    0xEB6E, 0xF3CF, 0xF4D3, 0xFD76, 0xEDF6, 0xC656, 0xD6B8, 0xF77B, 0x632B, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0xFE18, 0xFB6E, 0xF2EC, 0xF2AB, 0xF493, 0xF30C, 0xEAEC, 0xEB4E, 0xEB4E, 0xEC32,
    0xF4F4, 0xEBAF, 0xEA8B, 0xF24A, 0xEA4A, 0xEA4A, 0xEA4A, 0xF24A, 0xEA6A, 0xF26B, 0xEA6A, 0xEA6A, 0xEA4A, 0xEAAB, 0xF38F, 0xEBCF,
    0xF431, 0xF431, 0xF431, 0xF472, 0xF534, 0xFE39, 0x83CD, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0xA451, 0xFACB, 0xF2EC, 0xF28B, 0xF472, 0xF28B, 0xF30D, 0xF30D, 0xF2ED, 0xF515, 0xF493,
    0xEBB0, 0xF36F, 0xF32E, 0xEACC, 0xEA4A, 0xF22A, 0xEA29, 0xEA2A, 0xEA09, 0xEA29, 0xF2CC, 0xF411, 0xF3F0, 0xF34E, 0xEA8B, 0xF28B,
    0xEAEC, 0xEB2D, 0xF3AE, 0xEBF0, 0xF410, 0xF492, 0xFDF8, 0xE5F6, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0xFD96, 0xFAAB, 0xF34D, 0xFC31, 0xFA8A, 0xF1E9, 0xF26A, 0xF4B3, 0xF492, 0xE9E8, 0xE9E8,
    0xEA08, 0xEA08, 0xF1C8, 0xE9E8, 0xF2AB, 0xF2EC, 0xF2ED, 0xF32E, 0xF34E, 0xF32E, 0xEAEC, 0xEA09, 0xEA4A, 0xF2AB, 0xEAAB, 0xEA8B,
    0xF28B, 0xEACC, 0xEB0D, 0xF36E, 0xF3EF, 0xF430, 0xF471, 0xFD34, 0xFE59, 0x1082, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x3186, 0xFBCF, 0xFC73, 0xF36E, 0xE166, 0xD1E8, 0xD36E, 0xCB2C, 0xC945, 0xC125, 0xC186, 0xC166,
    0xC966, 0xC104, 0xCA6A, 0xD229, 0xD125, 0xD905, 0xE145, 0xE9A7, 0xF1C8, 0xF208, 0xF209, 0xEA0A, 0xEA4A, 0xEAAC, 0xF32E, 0xF30D,
    0xEACC, 0xF2AB, 0xF2AB, 0xEAAB, 0xF34E, 0xEC11, 0xF492, 0xF4F4, 0xFD54, 0xFEBB, 0x10A2, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x728A, 0xFB8E, 0xD0C3, 0xC125, 0xB905, 0xC1C7, 0xB842, 0xB822, 0xB042, 0xB082, 0xB041, 0xB882,
    0xB862, 0xD2EB, 0xB8A2, 0xC0C3, 0xB0E4, 0xC124, 0xB925, 0xC145, 0xC945, 0xD125, 0xD905, 0xF249, 0xFBD0, 0xFBD0, 0xFCB3, 0xF515,
    0xFCB3, 0xF431, 0xF3F0, 0xF3AF, 0xF32D, 0xF2CC, 0xF34D, 0xF3CF, 0xF472, 0xFCD2, 0xFDF8, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x6B0B, 0xF946, 0xC8A4, 0xB082, 0xA186, 0xAB6C, 0x9CB0, 0xADF5, 0xB676, 0xAE15, 0xCEFA, 0xB615,
    0xBDB5, 0xB532, 0xB450, 0xAB0A, 0xAA69, 0xA145, 0xA062, 0xB082, 0xC0C3, 0xC104, 0xCA8A, 0xC186, 0xC904, 0xD125, 0xD986, 0xEA8B,
    0xF38F, 0xFC32, 0xF3D0, 0xF34E, 0xF30C, 0xF2CC, 0xF2EC, 0xF32D, 0xF3CF, 0xFC92, 0xFCF3, 0x5208, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0xA470, 0xBDB4, 0xD79C, 0xDF9C, 0xEF9D, 0xEF7D, 0xF7BD, 0xEF5D, 0xEF7C, 0xEF7D, 0xEF7D,
    0xE73B, 0xE75C, 0xDEFA, 0xE79D, 0xDF9C, 0xDFBD, 0xC719, 0xADD5, 0x9C0E, 0xA2CA, 0xA0A2, 0xB862, 0xC104, 0xC125, 0xC945, 0xC966,
    0xD166, 0xE229, 0xFB4E, 0xFBF1, 0xFBD0, 0xF34D, 0xF2EC, 0xFAEC, 0xF32D, 0xF3CF, 0xFC71, 0x9B8E, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x634C, 0xEF7C, 0xF7BE, 0xEF9D, 0xF79D, 0xE75C, 0xDEFA, 0xE73B, 0xE71B, 0xEF5C, 0xE73B,
    0xE71B, 0xEF9D, 0xF79D, 0xEF7D, 0xEF7D, 0xE6FA, 0xEF9D, 0xEF5B, 0xE75C, 0xDF3B, 0xE7FE, 0xAD94, 0xA32B, 0x9861, 0xC0A3, 0xC104,
    0xC965, 0xD167, 0xD145, 0xE1A7, 0xFAEC, 0xFB8F, 0xFB0D, 0xF2CC, 0xFAEC, 0xF34D, 0xFC51, 0x9BCF, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x10A2, 0xFFFF, 0xDEFA, 0xDEFA, 0xEF5C, 0xE75B, 0xE73B, 0xE73B, 0xDEFA, 0xD6B9, 0xD6D9,
    0xEF5C, 0xE71A, 0xDF1B, 0xE73B, 0xE73B, 0xE73B, 0xE73C, 0xEF5C, 0xEF7D, 0xEF7D, 0xEF7D, 0xEF9C, 0xEFBD, 0xDFBD, 0xA4F2, 0xA185,
    0xB862, 0xC0E3, 0xCA29, 0xD2AB, 0xD1A7, 0xEA29, 0xFB4D, 0xFBAF, 0xFBAF, 0xFC72, 0xFB8E, 0x7B6D, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x630A, 0xE719, 0xD6D9, 0xDEDA, 0xC657, 0xD698, 0xD6B9, 0xD698, 0xD6B9, 0xE71B,
    0xCE77, 0xDEFA, 0xDEDA, 0xD6B9, 0xE71B, 0xDF1B, 0xDEFA, 0xDF1A, 0xE73C, 0xEF7C, 0xEF7C, 0xF7BE, 0xEF7D, 0xEF9D, 0xE75B, 0xD75B,
    0xA5B4, 0x91A6, 0xC125, 0xC0C3, 0xC925, 0xC8E5, 0xE105, 0xFA29, 0xFB4D, 0xFB8E, 0xFB6E, 0x4249, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x39C6, 0xBE15, 0xD677, 0xE73B, 0xDEFA, 0xDEDA, 0xD6D9, 0xD6D9, 0xCE78,
    0xC657, 0xDEFA, 0xCE78, 0xCE77, 0xE71B, 0xCE98, 0xE71B, 0xDEFA, 0xDF1A, 0xDEFA, 0xEF5C, 0xE71B, 0xE73B, 0xE73C, 0xE71B, 0xF7BE,
    0xEF7D, 0xE7DD, 0xA552, 0xA145, 0xB882, 0xC145, 0xC105, 0xD105, 0xE905, 0xF966, 0xFD35, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x18C2, 0x632B, 0xAD93, 0xF79C, 0xDED9, 0xCE57, 0xDED9,
    0xD6B9, 0xCE57, 0xCE78, 0xDEFA, 0xDED9, 0xBDF5, 0xE71B, 0xDEFA, 0xD698, 0xE71A, 0xDF1A, 0xCE98, 0xDF1B, 0xDED9, 0xE73B, 0xE75C,
    0xF79D, 0xE73B, 0xF7BE, 0xDFDD, 0xACD1, 0xA0C3, 0xA8A3, 0xA8E3, 0xB0E4, 0xE0C4, 0xA451, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x3A07, 0x7BEE, 0xC616,
    0xDEF9, 0xCE77, 0xD6B8, 0xCE98, 0xDEB9, 0xE73B, 0xDED9, 0xCE98, 0xEF3C, 0xCE98, 0xD6B9, 0xD6B9, 0xDED9, 0xDEDA, 0xCE77, 0xDEFB,
    0xDEFA, 0xDF1A, 0xEF5C, 0xE71B, 0xEF9D, 0xD79C, 0xACB0, 0x9A28, 0xBA8A, 0xDD13, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x4227, 0x632B, 0x8C4F, 0xC636, 0xDEF9, 0xD698, 0xDEF9, 0xBE16, 0xD6B9, 0xD6B8, 0xC616, 0xBDD5, 0xCE77, 0xDEFA, 0xD698,
    0xD6B9, 0xD698, 0xDF1B, 0xE71B, 0xDF1B, 0xEF7C, 0xD6FA, 0xEF9D, 0xADF5, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x2123, 0x7BCE, 0xDEF9, 0xCE97, 0xDED9, 0xE73A, 0xDF3B, 0xD6B9, 0xCE98, 0xD698,
    0xD698, 0xD6B9, 0xC636, 0xE71B, 0xCE77, 0xD6B9, 0xF79D, 0xFFFE, 0x0040, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x39C6, 0x52A9, 0x5AA9, 0x8C4F, 0xD6B9,
    0xD6D8, 0xDED9, 0xD6F9, 0xD6B8, 0xC616, 0xDED9, 0x9D11, 0x0861, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0840, 0x4A48, 0x52CA, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000
};

uint8_t *sushi8 = (uint8_t *)sushi;
/* USER CODE END PV */

/* Private function prototypes -----------------------------------------------*/
void SystemClock_Config(void);
static void MX_GPIO_Init(void);
static void MX_USB_OTG_FS_PCD_Init(void);
/* USER CODE BEGIN PFP */

/* USER CODE END PFP */

/* Private user code ---------------------------------------------------------*/
/* USER CODE BEGIN 0 */

//x:0-592
//r,g,b: 8bit color
void drawDVD(uint16_t x, uint8_t rgb[3])
{
	  for(uint32_t idy=0; idy<48; idy++){
		  for(uint32_t idx=0; idx<80; idx++){
			  uint32_t cur_x = (idx + x) % IRIS_SIZ_X;
			  uint16_t color = convRGB888toRGB565( (rgb[0] * dvd[idy][idx])>>4, (rgb[1] * dvd[idy][idx])>>4, (rgb[2] * dvd[idy][idx])>>4);
			  irisDrawDot(cur_x, idy, color);
		  }
	  }
}

void copySushi(uint8_t x, uint8_t y) {
	for(uint8_t i=0; i<48; i++) {
		for(uint8_t j=0; j<48; j++) {
			irisDrawDotSub((x+i)%IRIS_SUB_SIZ_X, (y+j)%IRIS_SUB_SIZ_Y, sushi[i+j*48]);
		}
	}
}
/* USER CODE END 0 */

/**
  * @brief  The application entry point.
  * @retval int
  */
int main(void)
{
  /* USER CODE BEGIN 1 */

  /* USER CODE END 1 */

  /* MCU Configuration--------------------------------------------------------*/

  /* Reset of all peripherals, Initializes the Flash interface and the Systick. */
  HAL_Init();

  /* USER CODE BEGIN Init */

  /* USER CODE END Init */

  /* Configure the system clock */
  SystemClock_Config();

  /* USER CODE BEGIN SysInit */

  /* USER CODE END SysInit */

  /* Initialize all configured peripherals */
  MX_GPIO_Init();
  MX_USB_OTG_FS_PCD_Init();
  /* USER CODE BEGIN 2 */
  initIris();
  initIrisSub();
  /* USER CODE END 2 */

  /* Infinite loop */
  /* USER CODE BEGIN WHILE */

  uint8_t sushix = 0;
  uint8_t sushiy = 0;

  while (1)
  {
    /* USER CODE END WHILE */

    /* USER CODE BEGIN 3 */
	  static uint32_t xpos=280;
	  static int8_t speed = 1;
	  static uint8_t col[3] = {0xFF, 0xFF, 0xFF};


	  irisClearDisp();
	  drawDVD(xpos, col);
	  irisUpdate();

	  copySushi(sushix++,sushiy++);
	  irisUpdateSub();

	  if(560 > xpos && 0 < xpos){
		  xpos += speed;
	  }else{
		  speed *= (-1);
		  xpos += speed;
		  col[0] = rand()%(256-30) + 30;
		  col[1] = rand()%(256-30) + 30;
		  col[2] = rand()%(256-30) + 30;
	  }
  }
  /* USER CODE END 3 */
}

/**
  * @brief System Clock Configuration
  * @retval None
  */
void SystemClock_Config(void)
{
  RCC_OscInitTypeDef RCC_OscInitStruct = {0};
  RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};

  /** Configure the main internal regulator output voltage
  */
  __HAL_RCC_PWR_CLK_ENABLE();
  __HAL_PWR_VOLTAGESCALING_CONFIG(PWR_REGULATOR_VOLTAGE_SCALE1);
  /** Initializes the RCC Oscillators according to the specified parameters
  * in the RCC_OscInitTypeDef structure.
  */
  RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE;
  RCC_OscInitStruct.HSEState = RCC_HSE_ON;
  RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
  RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;
  RCC_OscInitStruct.PLL.PLLM = 25;
  RCC_OscInitStruct.PLL.PLLN = 192;
  RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV2;
  RCC_OscInitStruct.PLL.PLLQ = 4;
  if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
  {
    Error_Handler();
  }
  /** Initializes the CPU, AHB and APB buses clocks
  */
  RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK
                              |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;
  RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;
  RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
  RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV2;
  RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;

  if (HAL_RCC_ClockConfig(&RCC_ClkInitStruct, FLASH_LATENCY_3) != HAL_OK)
  {
    Error_Handler();
  }
}

/**
  * @brief USB_OTG_FS Initialization Function
  * @param None
  * @retval None
  */
static void MX_USB_OTG_FS_PCD_Init(void)
{

  /* USER CODE BEGIN USB_OTG_FS_Init 0 */

  /* USER CODE END USB_OTG_FS_Init 0 */

  /* USER CODE BEGIN USB_OTG_FS_Init 1 */

  /* USER CODE END USB_OTG_FS_Init 1 */
  hpcd_USB_OTG_FS.Instance = USB_OTG_FS;
  hpcd_USB_OTG_FS.Init.dev_endpoints = 4;
  hpcd_USB_OTG_FS.Init.speed = PCD_SPEED_FULL;
  hpcd_USB_OTG_FS.Init.dma_enable = DISABLE;
  hpcd_USB_OTG_FS.Init.phy_itface = PCD_PHY_EMBEDDED;
  hpcd_USB_OTG_FS.Init.Sof_enable = DISABLE;
  hpcd_USB_OTG_FS.Init.low_power_enable = DISABLE;
  hpcd_USB_OTG_FS.Init.lpm_enable = DISABLE;
  hpcd_USB_OTG_FS.Init.vbus_sensing_enable = DISABLE;
  hpcd_USB_OTG_FS.Init.use_dedicated_ep1 = DISABLE;
  if (HAL_PCD_Init(&hpcd_USB_OTG_FS) != HAL_OK)
  {
    Error_Handler();
  }
  /* USER CODE BEGIN USB_OTG_FS_Init 2 */

  /* USER CODE END USB_OTG_FS_Init 2 */

}

/**
  * @brief GPIO Initialization Function
  * @param None
  * @retval None
  */
static void MX_GPIO_Init(void)
{
  GPIO_InitTypeDef GPIO_InitStruct = {0};

  /* GPIO Ports Clock Enable */
  __HAL_RCC_GPIOC_CLK_ENABLE();
  __HAL_RCC_GPIOH_CLK_ENABLE();
  __HAL_RCC_GPIOA_CLK_ENABLE();
  __HAL_RCC_GPIOB_CLK_ENABLE();

  /*Configure GPIO pin Output Level */
  HAL_GPIO_WritePin(GPIOA, GPIO_PIN_0|GPIO_PIN_1|GPIO_PIN_2|GPIO_PIN_3
                          |GPIO_PIN_4|GPIO_PIN_5|GPIO_PIN_6|GPIO_PIN_7, GPIO_PIN_RESET);

  /*Configure GPIO pin Output Level */
  HAL_GPIO_WritePin(GPIOB, GPIO_PIN_0|GPIO_PIN_1|GPIO_PIN_2|GPIO_PIN_3
                          |GPIO_PIN_4|GPIO_PIN_5|GPIO_PIN_6|GPIO_PIN_7, GPIO_PIN_RESET);

  /*Configure GPIO pins : PA0 PA1 PA2 PA3
                           PA4 PA5 PA6 PA7 */
  GPIO_InitStruct.Pin = GPIO_PIN_0|GPIO_PIN_1|GPIO_PIN_2|GPIO_PIN_3
                          |GPIO_PIN_4|GPIO_PIN_5|GPIO_PIN_6|GPIO_PIN_7;
  GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  HAL_GPIO_Init(GPIOA, &GPIO_InitStruct);

  /*Configure GPIO pins : PB0 PB1 PB2 PB3
                           PB4 PB5 PB6 PB7 */
  GPIO_InitStruct.Pin = GPIO_PIN_0|GPIO_PIN_1|GPIO_PIN_2|GPIO_PIN_3
                          |GPIO_PIN_4|GPIO_PIN_5|GPIO_PIN_6|GPIO_PIN_7;
  GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);

}

/* USER CODE BEGIN 4 */

/* USER CODE END 4 */

/**
  * @brief  This function is executed in case of error occurrence.
  * @retval None
  */
void Error_Handler(void)
{
  /* USER CODE BEGIN Error_Handler_Debug */
  /* User can add his own implementation to report the HAL error return state */
  __disable_irq();
  while (1)
  {
  }
  /* USER CODE END Error_Handler_Debug */
}

#ifdef  USE_FULL_ASSERT
/**
  * @brief  Reports the name of the source file and the source line number
  *         where the assert_param error has occurred.
  * @param  file: pointer to the source file name
  * @param  line: assert_param error line source number
  * @retval None
  */
void assert_failed(uint8_t *file, uint32_t line)
{
  /* USER CODE BEGIN 6 */
  /* User can add his own implementation to report the file name and line number,
     ex: printf("Wrong parameters value: file %s on line %d\r\n", file, line) */
  /* USER CODE END 6 */
}
#endif /* USE_FULL_ASSERT */

/************************ (C) COPYRIGHT STMicroelectronics *****END OF FILE****/
